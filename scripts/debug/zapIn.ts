import { ethers } from "hardhat";
import * as deployment from "../../deployments/base/ZapKyber.json";

async function main() {
  const privateKey = process.env.PK;
  const alchemyId = process.env.ALCHEMY_ID;
  if (!privateKey) {
    throw new Error("Private key is not defined");
  }
  if (!alchemyId) {
    throw new Error("Alchemy Id is not defined");
  }

  const provider = new ethers.providers.JsonRpcProvider(
    `https://base-mainnet.g.alchemy.com/v2/${alchemyId}`
  );

  const wallet = new ethers.Wallet(privateKey, provider);

  const contractAddress = "0x3C231B622151dbA4928a5bca2282905c75b6b105";
  const contractABI = deployment.abi;

  const contract = new ethers.Contract(contractAddress, contractABI, wallet);

  console.log("Calling zapIn...");
  const tx = await contract.zapIn(
    "0x3Fd7957D9F98D46c755685B67dFD8505468A7Cb6",
    "0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913",
    "1000000",
    "1",
    "0xe21fd0e9000000000000000000000000000000000000000000000000000000000000002000000000000000000000000011ddd59c33c73c44733b4123a86ea5ce57f6e854000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000018000000000000000000000000000000000000000000000000000000000000003c000000000000000000000000000000000000000000000000000000000000000c0010100000029020000006f71796114b9cdaef29a801bc5cdbcb561990eeb0000000000000000000000000007a120010a833589fcd6edb6e08f4c7c32d4f71b54bda029136b9bb36519538e0c073894e964e90172e1c0b41fd16397de3d179002e3d08b1698b8b866c727bcc900000000000000000000000066fc46c6000000400000000000000000000000000000000000000000000000000000000000000000000000000000000000135bc9d2966de600000000000001276354518fde70046a000000000000000000000000833589fcd6edb6e08f4c7c32d4f71b54bda029130000000000000000000000006b9bb36519538e0c073894e964e90172e1c0b41f000000000000000000000000000000000000000000000000000000000000016000000000000000000000000000000000000000000000000000000000000001a000000000000000000000000000000000000000000000000000000000000001e00000000000000000000000000000000000000000000000000000000000000200000000000000000000000000d16397de3d179002e3d08b1698b8b866c727bcc9000000000000000000000000000000000000000000000000000000000007a1200000000000000000000000000000000000000000000001246f22d5ddca4b0e9c00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000220000000000000000000000000000000000000000000000000000000000000000100000000000000000000000011ddd59c33c73c44733b4123a86ea5ce57f6e8540000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000007a120000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000022d7b22536f75726365223a22222c22416d6f756e74496e555344223a22302e35303137333537363236343930323035222c22416d6f756e744f7574555344223a22302e35303230353634333233353230313839222c22526566657272616c223a22222c22466c616773223a302c22416d6f756e744f7574223a2235343438393436393337313330343730333433373836222c2254696d657374616d70223a313732373830383032322c22496e74656772697479496e666f223a7b224b65794944223a2231222c225369676e6174757265223a225344326d3969526338475769344868357a70624b313635776c6c576c6c426c79546667562b58393575783444432b5a5a49336b32316776674833494a326e307159756d6d5543353049357174646e7330456d7565386d584f526d4d79466b444f3350526835625a68454464396a373242435267474d3255496f39444257543064503331346d44764a724c38474c566d48435245695645564e6b376b6f612f5a48394f6d507a4150506262644a4a634b6e3564776e417065305077566a3542762b616a4d54735069336374425a5275445577366e5848314e33485234516357342f49784e554a41617361694d666757416e645861536b5a4d503242576e4a32362f475961753045526e32492b6d63656e35666b32642b6d6a4e774e68747a445972737775544b4b7773753954337444687244396d7a4b356870736f6c663564573556486170577a5731746d324173497063577261312b673d3d227d7d00000000000000000000000000000000000000",
    "0xe21fd0e9000000000000000000000000000000000000000000000000000000000000002000000000000000000000000011ddd59c33c73c44733b4123a86ea5ce57f6e854000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000000000000000000000000000000000000000018000000000000000000000000000000000000000000000000000000000000003c000000000000000000000000000000000000000000000000000000000000000c0010100000029020000006f71796114b9cdaef29a801bc5cdbcb561990eeb0000000000000000000000000007a120010a833589fcd6edb6e08f4c7c32d4f71b54bda029136b9bb36519538e0c073894e964e90172e1c0b41fd16397de3d179002e3d08b1698b8b866c727bcc900000000000000000000000066fc46c6000000400000000000000000000000000000000000000000000000000000000000000000000000000000000000135bc9d2966de600000000000001276354518fde70046a000000000000000000000000833589fcd6edb6e08f4c7c32d4f71b54bda029130000000000000000000000006b9bb36519538e0c073894e964e90172e1c0b41f000000000000000000000000000000000000000000000000000000000000016000000000000000000000000000000000000000000000000000000000000001a000000000000000000000000000000000000000000000000000000000000001e00000000000000000000000000000000000000000000000000000000000000200000000000000000000000000d16397de3d179002e3d08b1698b8b866c727bcc9000000000000000000000000000000000000000000000000000000000007a1200000000000000000000000000000000000000000000001246f22d5ddca4b0e9c00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000220000000000000000000000000000000000000000000000000000000000000000100000000000000000000000011ddd59c33c73c44733b4123a86ea5ce57f6e8540000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000007a120000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000022d7b22536f75726365223a22222c22416d6f756e74496e555344223a22302e35303137333537363236343930323035222c22416d6f756e744f7574555344223a22302e35303230353634333233353230313839222c22526566657272616c223a22222c22466c616773223a302c22416d6f756e744f7574223a2235343438393436393337313330343730333433373836222c2254696d657374616d70223a313732373830383032322c22496e74656772697479496e666f223a7b224b65794944223a2231222c225369676e6174757265223a225344326d3969526338475769344868357a70624b313635776c6c576c6c426c79546667562b58393575783444432b5a5a49336b32316776674833494a326e307159756d6d5543353049357174646e7330456d7565386d584f526d4d79466b444f3350526835625a68454464396a373242435267474d3255496f39444257543064503331346d44764a724c38474c566d48435245695645564e6b376b6f612f5a48394f6d507a4150506262644a4a634b6e3564776e417065305077566a3542762b616a4d54735069336374425a5275445577366e5848314e33485234516357342f49784e554a41617361694d666757416e645861536b5a4d503242576e4a32362f475961753045526e32492b6d63656e35666b32642b6d6a4e774e68747a445972737775544b4b7773753954337444687244396d7a4b356870736f6c663564573556486170577a5731746d324173497063577261312b673d3d227d7d00000000000000000000000000000000000000"
  );

  console.log("Broadcasted...");
  await tx.wait();

  console.log("Tx hash:", tx.hash);
}

// Manejar errores
main().catch((error) => {
  console.error(error);
  process.exitCode = 1;
});
